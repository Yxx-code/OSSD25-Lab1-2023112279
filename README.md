# 京剧脸谱系统 v2.0

基于图片识别的人脸检测和脸谱应用系统，支持实时摄像头和图片文件处理。

## 🚀 快速开始

### 1. 安装依赖
```bash
# Windows
install.bat

# Linux/macOS
./install.sh
```

### 2. 运行程序
```bash
# 推荐：使用启动器
python run.py

# 或直接运行
python peking_opera_advanced.py   # 高级版
```

## 🎭 功能特性

- ✅ **图片识别**：支持JPG、PNG、BMP等格式
- ✅ **实时摄像头**：支持实时人脸检测
- ✅ **人脸检测**：基于MediaPipe的468个关键点检测
- ✅ **脸谱类型**：生角、旦角、净角、丑角四种类型
- ✅ **参数调节**：透明度、颜色强度、位置偏移等
- ✅ **图片保存**：支持PNG、JPEG格式导出
- ✅ **人脸轮廓**：可显示人脸关键点和轮廓
- ✅ **保存选项**：可选择是否在保存的图片中包含关键点标注

## 📁 文件说明

| 文件名 | 说明 |
|--------|------|
| `run.py` | 启动器（推荐使用） |
| `peking_opera_desktop.py` | 基础版（tkinter） |
| `peking_opera_advanced.py` | 高级版（PyQt5） |
| `install.bat` | Windows安装脚本 |
| `install.sh` | Linux/macOS安装脚本 |
| `requirements.txt` | Python依赖包 |

## 🎨 版本对比

| 特性 | 基础版 | 高级版 |
|------|--------|--------|
| 界面 | 简洁 | 现代化 |
| 启动速度 | 快 | 稍慢 |
| 功能 | 基础 | 完整 |
| 系统要求 | 低 | 中等 |

## 🔧 系统要求

- Python 3.8+
- Windows 10+, macOS 10.14+, Ubuntu 18.04+
- 摄像头（可选）

## 📖 使用说明

1. **选择图片**：点击"选择图片"按钮选择图片文件
2. **选择脸谱**：在右侧面板选择脸谱类型
3. **调节参数**：调整透明度、颜色强度等参数
4. **显示轮廓**：勾选"显示人脸关键点"查看检测结果
5. **保存设置**：勾选"保存时包含关键点"决定保存内容
6. **保存图片**：点击"保存图片"按钮保存结果

## 🎯 脸谱类型

- **生角**：正直英俊的男性角色
- **旦角**：柔美端庄的女性角色
- **净角**：性格鲜明的男性角色
- **丑角**：滑稽幽默的喜剧角色

## 🐛 故障排除

### 常见问题
1. **人脸检测失败**：确保图片包含清晰的人脸
2. **摄像头无法打开**：检查摄像头权限和占用情况
3. **依赖包安装失败**：检查网络连接和Python环境

### 测试功能
```bash
# 测试人脸检测
python test_landmarks.py your_image.jpg

# 测试摄像头功能
python test_camera.py
```

## 📄 许可证

本项目仅供学习和研究使用。

---

**版本**：v2.0  
**更新时间**：2024年
